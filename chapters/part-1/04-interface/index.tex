%\documentclass{scrartcl}
\documentclass{standalone}
\usepackage{tikz,ifthen}
\usetikzlibrary{math}

\input{include/colors.tex}

\begin{document}
\begin{tikzpicture}

\tikzmath{
% first cache block
let \evenoffset = 0;
let \oddoffset = 32;
let \offset = (0.5, 0.5);
int \ix;
for \x in {0,1,...,3}{
  for \y in {0,1,...,3}{
    \ix = (4*\x + \y)/2 + \evenoffset;
    if Mod(\x+\y,2) == 1 then {
        \ix = \ix + \oddoffset;
    };
    {
      \draw \offset + (\x,\y) node{\ix};
    };
  };
};
% second cache block
let \evenoffset = 8;
let \offset = (0.5, 4.5);
int \ix;
for \x in {0,1,...,3}{
  for \y in {0,1,...,3}{
    \ix = (4*\x + \y)/2 + \evenoffset;
    if Mod(\x+\y,2) == 1 then {
        \ix = \ix + \oddoffset;
    };
    {
      \draw \offset + (\x,\y) node{\ix};
    };
  };
};
% third cache block
let \evenoffset = 16;
let \offset = (4.5, 0.5);
int \ix;
for \x in {0,1,...,3}{
  for \y in {0,1,...,3}{
    \ix = (4*\x + \y)/2 + \evenoffset;
    if Mod(\x+\y,2) == 1 then {
        \ix = \ix + \oddoffset;
    };
    {
      \draw \offset + (\x,\y) node{\ix};
    };
  };
};
% fourth cache block
let \evenoffset = 24;
let \offset = (4.5, 4.5);
int \ix;
for \x in {0,1,...,3}{
  for \y in {0,1,...,3}{
    \ix = (4*\x + \y)/2 + \evenoffset;
    if Mod(\x+\y,2) == 1 then {
        \ix = \ix + \oddoffset;
    };
    {
        \draw \offset + (\x,\y) node{\ix};
    };
  };
};
% checkerboard coloring
for \x in {0,1,...,7}{
  for \y in {0,1,...,7}{
    if Mod(\x+\y,2) == 1 then {
        { \fill[gray,opacity=0.15] (\x,\y) rectangle ++(1,1); };
    };
  };
};
};

\draw [step=1.0,gray, very thin] (0,0) grid (8,8);
\draw [step=4.0,cblue, very thick] (0,0) grid (8,8);

\draw[thick,->] (-1,-1) -- (1.5,-1) node[right]{t};
\draw[thick,->] (-1,-1) -- (-1,1.5) node[above]{x};

\end{tikzpicture}
\end{document}
